## 1단계. 문제 이해 및 설계 범위 확정
> 면접관에게 질문하며 모호함을 제거하고 문제 이해도를 높인다.

질문을 통해 얻은 것
- URL 단축키 동작 예시 : `https://www.systeminterview.com/q=chatsystem&c=loggedin&v=v3&l=long` -> `https://tinyurl.com/y7ke-ocwj`
- 단축 URL에 접속해도 원 URL로 갈 수 있어야 한다.
- 매일 1억개의 단축 URL을 만들 수 있어야 한다.
- 단축시키는 URL 길이는 짧을 수록 좋다.
- 포함 문자 : 숫자, 영문자(a~z, A~Z)
- 단축된 URL 삭제/갱신할 수 없다.

#### 개략적 추정
- 쓰기 연산 : 매일 1억개 단축 URL 생성
- 초당 쓰기 연산 : 1억개 / (24 * 60 * 60) = 초당 약 1,000개
- 초당 읽기 연산 (쓰기의 10배라고 할 경우) = 초당 약 10,000개 생성
- URL 단축기를 10년동안 운영 시 보관할 URL 갯수 = 1억 * 365 * 10  = 3650억개의 URL
- 10년동안 필요한 저장 공간 (축약 전 URL 평균 길이가 100) = 100byte * 3650억개 = 365000byte = 
36.5TB

## 2단계. 걔략적 설계안 제시 및 동의 구하기

#### API 엔드포인트
RESTful 방식으로 엔드포인트를 설계한다.
1. URL 단축용 엔드 포인트 : 
- POST /api/v1/data/shorten
- 인자 : {longUrl: longUrl} - String 타입
- 반환 : 단축 URL
2. URL 리다이렉션용 엔드 포인트 :
- GET /api/v1/shortUrl
- 반환 : 원래 URL (Location 헤더에 넣어 반환! HTTP 리디렉션 목적지가 될 것임)

#### URL 리디렉션
요청과 응답을 나타내는 그림 8-2 : 단축 서버와 애플리케이션 서버 두 대가 각자 있다.

클라이언트가 단축 URL을 전송하면, 단축 URL 서버는 원래 URL로 바꾸어서 Location 헤더에 원 URL을 넣어 응답하는데, 이때 2가지 응답 방식이 있다.
- 301 Permanently Moved : 301번은 해당 단축 URL에 대한 HTTP 요청의 처리 책임이 영구적으로 (Location 헤더에 반환된) 원 URL로 이전되었다. 즉 브라우저가 이 응답을 캐시하는 방법이다. 그래서 추후 동일 단축 URL로 요청을 보내야할 때는 브라우저는 캐시된 원래 URL로 (애플리케이션) 서버에 요청을 보내게 된다.
	- 장 : 서버 부하를 줄이는 데에 도움이 된다.
- 302 Found : 주어진 URL로의 요청이 '일시적으로' Location 헤더가 지정하는 URL에 의해 처리되어야 한다는 응답. 클라이언트의 요청은 항상 단축 URL 서버로 먼저 보내진 후 원래 URL로 리디렉션될 것이다.
	- 장 : 트래픽 분석이 중요할 때는 클릭 발생률이나 발생 위치를 추적하는데 더 유리하다.
	- *왜???*

URL 리디렉션 구현 방법은 해시 테이블이 가장 간단한 방법이다. <단축 URL, 원 URL> 쌍

### URL 단축
